<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Caqti_connection_sig (caqti.Caqti_connection_sig)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">caqti</a> &#x00BB; Caqti_connection_sig</nav><h1>Module <code>Caqti_connection_sig</code></h1><p>Signature of connection handles.</p><p>You can obtain a connection handle from <code>Caqti_lwt</code> or <code>Caqti_async</code>, which both implement the <a href="../Caqti_connect_sig/index.html"><code>Caqti_connect_sig</code></a> interface.</p><p>While <a href="../Caqti_request/index.html#type-t"><code>Caqti_request.t</code></a> objects hold SQL code to be sent to the database, connection handles defined here provide the means to execute them with actual parameters on an RDBMS. So, there is a separation between preparation and execution. This is motivated by the common support for prepared queries in database client libraries, and by the desire to keep the possibly deeply nested data-processing code uncluttered by strings of SQL code. For this separation to be reasonably safe, the request declares the types of parameters and result, and these type declarations are placed right next to the SQL code, so that we can rely on OCaml's powers of refactoring large code bases safely.</p><p>The result type of <a href="../Caqti_request/index.html#type-t"><code>Caqti_request.t</code></a> only describes how to decode <em>individual rows</em>, leaving the decision of how to process multiple rows to the execution interface. That is, the request does not detail how to fold over rows, and for this reason, the separation into request constructors and executors entails a collection of pairwise compatible convenience functions across multiplicities between the APIs. E.g. when there are like-named <a href="../Caqti_request/index.html#val-find_opt"><code>Caqti_request.find_opt</code></a> and <a href="module-type-S/index.html#val-find_opt"><code>S.find_opt</code></a> functions, the first declares the row multiplicity, while the latter implements a way to fold rows into an OCaml datatype for that multiplicity.</p><p>Though a request object stipulates the expected multiplicity, there is still choice left for how to fold rows. E.g., a request constructed by <a href="../Caqti_request/index.html#val-collect"><code>Caqti_request.collect</code></a>, or in fact any request, can be processed with <a href="module-type-S/index.html#val-fold"><code>S.fold</code></a>, <a href="module-type-S/index.html#val-fold_s"><code>S.fold_s</code></a>, <a href="module-type-S/index.html#val-iter_s"><code>S.iter_s</code></a>, or <a href="module-type-S/index.html#val-collect_list"><code>S.collect_list</code></a>. The two functions <a href="../Caqti_request/index.html#val-create"><code>Caqti_request.create</code></a> and <a href="module-type-S/index.html#val-fold"><code>S.fold</code></a> can construct and process any supported SQL query.</p></header><dl><dt class="spec module-type" id="module-type-Base"><a href="#module-type-Base" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Base/index.html">Base</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Essential connection signature implemented by drivers.</p></dd></dl><div class="spec module-type" id="module-type-Convenience"><a href="#module-type-Convenience" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Convenience/index.html">Convenience</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module-type" id="module-type-Populate"><a href="#module-type-Populate" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Populate/index.html">Populate</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec module-type" id="module-type-S"><a href="#module-type-S" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-S/index.html">S</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Full connection signature available to users.</p></dd></dl></div></body></html>